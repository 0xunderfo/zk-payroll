# Force Railway to use Node.js instead of Bun
# snarkjs web-worker crashes with Bun runtime

providers = ["node"]

[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
cmds = ["npm ci"]

[phases.build]
cmds = ["mkdir -p /app/circuits && cp -r circuits/* /app/circuits/ 2>/dev/null || true"]

[start]
cmd = "npx tsx src/index.ts"
